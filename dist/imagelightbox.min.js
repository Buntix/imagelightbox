!function(t,n,i,e){"use strict";var o=function(){var t=i.body||i.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},a=o()!==!1,r=function(t,n,i){var e={},a=o();e[a+"transform"]="translateX("+n+")",e[a+"transition"]=a+"transform "+i+"s linear",t.css(e)},u="ontouchstart"in n,c=n.navigator.pointerEnabled||n.navigator.msPointerEnabled,l=function(t){if(u)return!0;if(!c||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(e){var o=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,importAttrs:{href:"src"},navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){o.arrows&&E(this),o.navigation&&x(this,o.selector),o.overlay&&g(),o.button&&p()},onEnd:function(){o.activity&&f(),o.arrows&&T(),o.navigation&&y(),o.overlay&&s(),o.caption&&m(),o.button&&h()},onLoadStart:function(){o.activity&&d(),o.caption&&m()},onLoadEnd:function(){o.activity&&f(),o.arrows&&t(".imagelightbox-arrow").css("display","block"),o.navigation&&b(o.selector),o.caption&&v()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var t=w.index(S)-1;if(t<0){if(o.quitOnEnd===!0)return U(),!1;t=w.length-1}S=w.eq(t)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var t=w.index(S)+1;if(t>=w.length){if(o.quitOnEnd===!0)return U(),!1;t=0}S=w.eq(t)}},e),d=function(){t('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},f=function(){t("#imagelightbox-loading").remove()},g=function(){t('<div id="imagelightbox-overlay"></div>').appendTo("body")},s=function(){t("#imagelightbox-overlay").remove()},p=function(){t('<a href="#" id="imagelightbox-close"></a>').appendTo("body").on("click",function(){return t(this).remove(),U(),!1})},h=function(){t("#imagelightbox-close").remove()},v=function(){var n=t(S).find("img").attr("alt");n&&n.length>0&&t('<div id="imagelightbox-caption">'+n+"</div>").appendTo("body")},m=function(){t("#imagelightbox-caption").remove()},x=function(n,i){var e=t(i).not(".imagelightbox-invalid");if(e.length){for(var o=t('<div id="imagelightbox-nav"></div>'),a=0;a<e.length;a++)o.append('<a href="#"></a>');o.appendTo("body"),o.on("click touchend",function(){return!1});var r=o.find("a");r.on("click touchend",function(){var n=t(this);if(e.eq(n.index()).attr("href")!==t("#imagelightbox").attr("src")){var i=w.eq(n.index());if(i.length){var o=w.index(S);S=i,L(n.index()<o?"left":"right")}}return r.removeClass("active"),r.eq(n.index()).addClass("active"),!1}).on("touchend",function(){return!1})}},b=function(n){var i=t("#imagelightbox-nav").find("a");i.removeClass("active"),i.eq(t(n).filter('[href="'+t("#imagelightbox").attr("src")+'"]').index(n)).addClass("active")},y=function(){t("#imagelightbox-nav").remove()},E=function(n){var i=t('<button type="button" class="imagelightbox-arrow imagelightbox-arrow-left"></button><button type="button" class="imagelightbox-arrow imagelightbox-arrow-right"></button>');i.appendTo("body"),i.on("click touchend",function(i){return i.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?P(n):X(n),!1})},T=function(){t(".imagelightbox-arrow").remove()},w=t([]),S=t(),k=t(),q=0,C=0,O=0,I=!1,D=function(){if(!k.length)return!0;var i=.8*t(n).width(),e=n.innerHeight?n.innerHeight:t(n).height(),o=.9*e,a=new Image;a.src=k.prop("currentSrc")||k.prop("src"),a.onload=function(){if(q=a.width,C=a.height,q>i||C>o){var r=q/C>i/o?q/i:C/o;q/=r,C/=r}k.css({width:q+"px",height:C+"px",top:(e-C)/2+"px",left:(t(n).width()-q)/2+"px"})}},L=function(n){if(I)return!1;if(n="undefined"!=typeof n&&("left"===n?1:-1),k.length){var i={opacity:0};a?r(k,100*n-O+"px",o.animationSpeed/1e3):i.left=parseInt(k.css("left"))+100*n+"px",k.animate(i,o.animationSpeed,function(){N()}),O=0}I=!0,o.onLoadStart!==!1&&o.onLoadStart(),setTimeout(function(){k=M(t('<img id="'+o.id+'" />'),S).on("load",function(){var i={opacity:1};if(k.appendTo("body"),D(),k.css("opacity",0),a)r(k,-100*n+"px",0),setTimeout(function(){r(k,"0px",o.animationSpeed/1e3)},50);else{var e=parseInt(k.css("left"));i.left=e+"px",k.css("left",e-100*n+"px")}if(k.animate(i,o.animationSpeed,function(){I=!1,o.onLoadEnd!==!1&&o.onLoadEnd()}),o.preloadNext){var u=w.eq(w.index(S)+1);u.length||(u=w.eq(0)),M(t("<img />"),u)}}).on("error",function(){o.onLoadEnd!==!1&&o.onLoadEnd()});var i=0,e=0,u=0;k.on(c?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),o.quitOnImgClick)return U(),!1;if(l(t.originalEvent))return!0;var n=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;q/2>n?P():X()}).on("touchstart pointerdown MSPointerDown",function(t){return!(l(t.originalEvent)&&!o.quitOnImgClick)||(a&&(u=parseInt(k.css("left"))),void(i=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!(l(t.originalEvent)&&!o.quitOnImgClick)||(t.preventDefault(),e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,O=i-e,void(a?r(k,-O+"px",0):k.css("left",u-O+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!(l(t.originalEvent)&&!o.quitOnImgClick)||void(Math.abs(O)>50?O<0?P():X():a?r(k,"0px",o.animationSpeed/1e3):k.animate({left:u+"px"},o.animationSpeed/2))})},o.animationSpeed+100)},M=function(n,i){return t.each(o.importAttrs,function(t,e){i.is("["+t+"]")&&n.attr(e,i.attr(t))}),n},P=function(){o.previousTarget()!==!1&&L("left")},X=function(){o.nextTarget()!==!1&&L("right")},N=function(){return!!k.length&&(k.remove(),void(k=t()))},K=function(t){return!I&&(I=!1,o.onStart!==!1&&o.onStart(),S=t,void L())},U=function(){return!!k.length&&void k.animate({opacity:0},o.animationSpeed,function(){N(),I=!1,o.onEnd!==!1&&o.onEnd()})},_=function(n){n.each(function(){return!(o.allowedTypes&&!j(t(this)))&&void(w=w.add(t(this)))}),n.on("click",function(n){n.preventDefault(),K(t(this))})},j=function(n){var i=M(t("<blink>"),n).attr("src");return!!new RegExp(".("+o.allowedTypes+")$","i").test(i)||(n.addClass("imagelightbox-invalid"),!1)};return this.startImageLightbox=function(){this.length>0&&K(t(this[0]))},t(n).on("resize",D),t(i).ready(function(){o.quitOnDocClick&&t(i).on(u?"touchend":"click",function(n){k.length&&!t(n.target).is(k)&&(n.preventDefault(),U())}),o.enableKeyboard&&t(i).on("keyup",function(t){return!k.length||(t.preventDefault(),27===t.keyCode&&o.quitOnEscKey===!0&&U(),void(37===t.keyCode?P():39===t.keyCode&&X()))})}),t(i).off("click",this.selector),_(t(this)),this.loadPreviousImage=function(){P()},this.loadNextImage=function(){X()},this.quitImageLightbox=function(){return U(),this},this.addToImageLightbox=function(t){_(t)},this}}(jQuery,window,document);